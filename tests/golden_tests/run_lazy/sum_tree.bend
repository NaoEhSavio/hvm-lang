type Tree = (Leaf x) | (Node x0 x1)

add = 位a 位b (+ a b)

gen = 位n switch n {
  0: (Tree/Leaf 1)
  _: (Tree/Node (gen n-1) (gen n-1))
}

sum = 位t
  match t {
    Tree/Leaf: t.x
    Tree/Node: (add (sum t.x0) (sum t.x1))
  }

main = (sum (gen 8))
